RewriteEngine On

# Allow API access (works for both /SmileBrightbase/api/ and direct access)
RewriteCond %{REQUEST_URI} ^.*/api/
RewriteRule ^(.*)$ - [L]

# Allow direct access to public folder
RewriteCond %{REQUEST_URI} ^.*/public/
RewriteRule ^(.*)$ - [L]

# Redirect root requests to public/index.html
RewriteCond %{REQUEST_URI} ^.*/?$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^$ public/index.html [L]

# Redirect all other requests to the public directory (if file doesn't exist in root)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^.*/public/
RewriteRule ^(.*)$ public/$1 [L]
